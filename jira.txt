ðŸ§© Story 1: Webhook API to Receive Order Create/Update Events (DB + .NET 8)

User Story

As a Wells Fargo downstream system
I want to expose a secure webhook API to receive order creation and order update events from the Cisive system
So that order data is reliably persisted in the Wells database and can be used for internal processing, tracking, and reporting.

â¸»

Business Context
	â€¢	Cisive will notify Wells via webhook whenever:
	â€¢	A new order is created
	â€¢	An existing order is updated
	â€¢	Wells must:
	â€¢	Validate the incoming payload
	â€¢	Store the data in a structured, auditable format
	â€¢	Handle retries and duplicate events safely

â¸»

Acceptance Criteria
	1.	Webhook endpoint supports OrderCreated and OrderUpdated events.
	2.	Endpoint is implemented using .NET 8 Web API.
	3.	Incoming payload is validated (schema + required fields).
	4.	Orders are inserted or updated in Wells database based on external order ID.
	5.	Webhook processing is idempotent (duplicate events do not create duplicate records).
	6.	All requests and responses are logged with correlation IDs.
	7.	Errors are handled gracefully and return appropriate HTTP status codes.
	8.	Audit fields (CreatedBy, CreatedOn, UpdatedOn, SourceSystem) are populated.
	9.	Webhook endpoint is secured (authentication/authorization enforced).
	10.	API returns:
	â€¢	200 OK for successful processing
	â€¢	400 Bad Request for validation errors
	â€¢	401/403 for auth failures
	â€¢	500 for unexpected errors

â¸»

Technical Tasks

API / Code
	â€¢	Create webhook controller (POST /api/webhooks/cisive/orders)
	â€¢	Define request DTOs for order payload
	â€¢	Implement validation logic
	â€¢	Implement idempotency check using external order ID + event type
	â€¢	Implement service layer for order upsert
	â€¢	Add structured logging and exception handling
	â€¢	Add unit tests and integration tests

Database
	â€¢	Create Orders table (or extend existing)
	â€¢	Create OrderWebhookEvents table for audit/idempotency
	â€¢	Add indexes on external order ID and event type
	â€¢	Add schema versioning/migration scripts
